### 基本bash shell命令

Linux下的每一个用户对于bash的配置都不会完全一样，所以我们对用户的配置写在文件`/etc/passwd`中，最后一个字段代表了用户的默认shell环境

#### man命令使用手册

强烈建议阅读`DESCRIPTION`段落的前两段，熟悉bash手册的行话

* NAME : 命令名称和简要描述
* DESCRIPTION : 命令描述
* 命令页面的第一个数字代表着我们的命令的特性
  * 1 : 可执行程序或者shell命令
  * 2 : 系统调用
  * 3 : 库调用
  * 4 : 特殊文件
  * 5 : 文件格式和约定
  * 6 :游戏
  * ...

#### 文件目录结构

Linux下的文件目录结构和Windows是不一样的，其中使用了**虚拟目录**的概念,第一块硬盘在Linux上我们称之为是根驱动器，根驱动器包含了虚拟目录的核心

虚拟目录中会存在一些(挂载点)的文件，用来分配额外的存储设备(其他设备在虚拟目录的挂载点下显示)，通常系统文件在跟驱动器，用户文件在其他的驱动器中

常用的目录的存储功能

* / : 根目录
* /bin : 二进制目录，存放很多用户的GNU工具
* /boot :启动目录，存放启动文件 
* /dev : 设备目录，在这里存放设备节点
* /etc : 用户配置文件存放目录
* /home : 用户目录
* /lib : 库目录，存放系统和应用程序的库文件
* /media : 移动媒体设备(U盘)的常用挂载点
* /mnt : 挂载目录，另一个可移动设备的常用挂在目录
* /opt : 可选目录，存放第三方软件和数据文件
* /proc : 进程目录，存放现有硬件机器进程的信息
* /root :root用户的主目录 
* /sbin : 系统二进制目录，存放GNU管理员级别工具
* /run : 运行目录，存放运行时信息
* /src : 服务目录，存放本地符文的相关文件
* /sys : 系统目录，硬件的相关文件
* /tmp : 临时目录，在该目录中可以创建和删除临时工作文件
* /usr : 用户二进制目录，大量用户级的GNU工具存放
* /var : 可变目录，存放经常变化的文件

#### cd

* cd   :  切换到家目录
* cd ~ : 切换到家目录
* cd destination : 切换到目标目录，使用绝对路径或者相对路径

#### pwd

* pwd显示当前的目录

#### ls

显示当前目录下的文件和目录,但是不显示保存配置的隐藏文件

* -a : 显示所有文件，包括隐藏文件

* -R : 递归打印,输出有时候会非常的烦人，不推荐使用，还可以用tree命令代替

* -i : 打印文件的inode编号,在ln命令中可以使用

* -lh: 长列表现实，输出文件的其他的信息,h参数人性化打印输出

  ```bash
  -rw-rw-r-- 1 lantian lantian   8048 Aug 22 12:40 Python-Chart11-IO.ipynb
  -rw-rw-r-- 1 lantian lantian   7061 Aug 21 17:12 Python-Chart7-OOP.ipynb
  -rw-rw-r-- 1 lantian lantian   9312 Aug 21 17:12 Python-Chart8-Error.ipynb
  -rw-rw-r-- 1 lantian lantian  13466 Aug 21 17:12 Python-Chart9-MagicMethod.ipynb
  drwxrwxr-x 2 lantian lantian   4096 Aug 21 17:12 Python-Email
  -rw-rw-r-- 1 lantian lantian  15451 Aug 21 17:12 Python-InnerModule1.ipynb
  -rw-rw-r-- 1 lantian lantian  13536 Aug 21 17:12 Python-Itertools.ipynb
  # d目录，-文件，c字符，b块设备 ,l是软链接文件(硬链接文件是-,v表示是一种文件的别名)
  # 权限
  # 硬链接数目，文件的名称变量个数
  # 属主用户名
  # 属组组名
  # 文件大小，字节为单位-h参数可以用k,m,G的形式人性化打印大小
  # 上次修改时间，访问时间是不会记录的
  # 文件名
  ```

* 定义过滤器(文件扩展匹配字符串)

  -a(-R参数不适用)参数打印的时候非常多的打印出来很多的东西，我们可以使用过滤器来过滤输出，**过滤器只对本层的文件过滤，不对深层的文件进行处理**

  通配符模式匹配:

  * ? : 一个字符
  * \* : 0+个字符
  * \[a-zA-Z\] :可以使用这种方式实现匹配制定范围内的**字符**
  * [!a-z] : 排除字符

  使用通配符的方式被称为文件扩展匹配

#### touch

1. 创建空文件，制定创建者是文件的属主

2. 修改文件**修改时间**

   这个操作只修改时间不修改文件内容

   ```bash
   touch somefile
   touch somefile    # 同样的名字只会更新文件的修改时间同步至现在，文件内容不会丢失
   ```

#### cp

```bash
cp source destination    # 文件赋值到destination上并且重命名，修改时间更新,destination也可以是现有的文件目录(打全最后的/号，声明是一个路径不是文件)，代表复制到现有目录下
```

* -i : 如果目标的文件名存在，-i参数询问是否覆盖
* -R : 递归复制整个目录
* cp也支持文本过滤器(通配符弱匹配文本)

#### ln

Linux下的文件链接存在两种形式,Linux给系统种的每个文件分配一个inode编号,不同文件的inode绝对不会相同

1. 符号链接(软连接)

   符号链接指向一个真正的文件,文件内容是指向的文件的地址信息

2. 硬链接

   原始文件的别名,另一个名称指针,与源文件存放相同的内容,硬链接共享inode编号,软连接不是

   但是硬链接存在限制,只可以在同文件系统种使用,跨文件系统只可以使用软连接

   **硬链接不可以链接目录文件**

参数构建

* -s : 构建软连接 (默认构建硬链接)

```bash
ln -s file newfile
ln file newfile
```

#### mv

1. 重命名文件
2. 移动文件

mv命令只会改变文件名,对文件的内容不会产生影响

我们完全可以实现对文件的移动以及重命名操作这是可以同步执行的

* -i : 参数使用的时候提示是否对已存在的同名文件进行覆盖

#### rm

* -i : 提示是否删除,真的很有必要在使用rm命令的时候同时使用这个参数
* -f : 强制删除不需要提示
* -r : 递归删除目录

#### mkdir

```bash
mkdir dirname
mkdir -p dirname/dir1 dirname/dir2
# -p参数递归创建目录
dirname
|_dir1
|_dir2
```

#### rmdir & rm

* rmdir默认只会删除空目录

* rm -rf(-ri) : 递归强制删除目录,最好使用ri参数,防止捅娄子

  ```bash
  rmdir emptydir
  rm -ri dir 
  ```

#### file

1. file命令是一个很强大的工具,他可以识别出文本的类型以及文本的编码情况
2. 可以识别是普通文件,目录文件,链接文件甚至是链接的指向目的地,还可以根据`#!`查找到脚本文件的语言属性
3. 针对位二进制文件,file命令还可以给出需要参考的库和执行的操作系统平台

```bash
file text
file some.bin
file link_file
```

#### cat / more / less / tail / head

1. cat

   cat的缺陷在于输出不可控

   * -n / -b : 输出加上行号,-b只给存在文本的行加上行号,空白行(什么字符都没有,空白字符算作字符[\t,空格等]忽略
   * -t / -T : 对所有的制表符号(\t[Tab])使用^I字符组合代替

2. more分页工具

   * space : 翻页
   * \n : 逐行查看

3. less分页工具

   more命令的升级版本

   除了more的使用规范之外,还支持使用上下左右键进行文本的全面控制

4. tail尾部分查询

   上述的命令的权限就是我们需要等待文件的加载完成才可以浏览,但是有时候文件非常庞大或者我们只期待其中的一部分数据的时候就需要用到部分查询

   **tail命令默认显示文件的后10行**

   * -n x : 参数可以指定显示的行数x

   * -f : 实时监控文件的最后几行的变化,动态显示(和其他的进程并行)

     ```bash
     while [ 1 ]
     do
         echo `date` > file1
         sleep 1
     done
     # 在另一个终端模拟器中使用命令监视
     tail -f file1
     ```

5. head

   头查询,和tail类似

   **支持-n参数但不支持-f参数,head只是作为一种便捷查询文件开头的命令**

