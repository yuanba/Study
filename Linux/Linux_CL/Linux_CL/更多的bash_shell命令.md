### More Bash Shell Command

#### 监控程序运行

在当今的图形化的时代中,每一个应用程序中的运行着大量的程序,我们需要一种直观的手法了解到运行着的程序的情况,命令行就是

##### ps

* 程序运行在主机上就成为进程,ps命令提供强大的功能来观察这些进程

  1. 默认情况下,ps命令只会显示运行在当前控制台下的属于用户的进程

  2. 显示内容有

     PID进程号 , TTY虚拟终端编号 , TIME进程已经占用的CPU时长,CMD进程名称

```bash
ps -e    # 显示全部进程
ps -a    # 显示所有的除了控制进程和无终端进程的所有进程
ps -C man,ls,cd,ps,...    # 显示在后面的列表中的命令进程
ps -f    # 详细输出,添加了PPID父亲进程编号,UID使用者,STIME进程启动时间,CMD会打印的更加详细,C进程的CPU利用率
ps -l    # 长输出,打印关于进程的所有的详细信息
# -l参数的打印结果简单介绍
# F    : 内核给进程的系统标记
# S    : 进程状态(O正在运行,S休眠,R可运行正在阻塞等待,Z僵化不存在父进程,T停止状态)
# PRI  : 进程优先级,越大越低
# NI   : 谦让度决定优先级
# ADDR : 进程的内存地址 
# SZ   : 继承自愿从虚拟内存中换出需要的交换空间的大致大小
# WCHAN: 进程休眠的内核函数地址
ps --forest    # 跟踪父子进程的关系,使用ASCII的形式打印进程树,关于打印进程树的情况可以参考pstree命令的使用
```

​	   3. 结ps的综合使用参数

```bash
ps -ef | grep ...    # 查找对应的命令是否存在
ps -al --forest    # 详细信息打印
```

##### top

1. ps命令不适合观察频繁换进换出内存的程序,**top可以实时显示进程信息**

   ```bash
   top - 14:41:48 up 3 days,  2:04,  3 users,  load average: 0.06, 0.14, 0.16    # 登录用户数目,平均负载最近1,5,15分钟的平均负载,越大繁忙,2以上很繁忙
   Tasks: 210 total,   1 running, 209 sleeping,   0 stopped,   0 zombie    # 1个运行,209个休眠,0个停止和僵化进程(进程结束父进程无响应)
   %Cpu(s):  1.6 us,  0.9 sy,  0.0 ni, 97.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st    # CPU的目前情况
   KiB Mem :  3927940 total,   360564 free,  1426120 used,  2141256 buff/cache    # 物理内存信息
   KiB Swap:  4075516 total,  4075516 free,        0 used.  1976900 avail Mem     # 交换空间
   #           优先级 谦让  虚拟内存占用   物理内存占用   共享容量  状态
   PID USER      PR  NI    VIRT               RES     SHR    S  %CPU %MEM     TIME+ COMMAND          970 root      20   0  419072            130048   86912    S   4.0  3.3   5:57.68 Xorg              1856 lantian  20   0 1305384            160308   77080    S   2.3  4.1   6:40.40 compiz
   ...
   # 以上是top运行额部分动态显示的静态显示
   ```

2. 参数使用

   在进入top界面的时候我们可以使用很多的参数

   * f : 进入排序选择界面,按照提示选择要排序的字段(s确定,q退出即可更新重排序)
   * d : 设置轮询间隔,默认是3s
   * k : 杀死进程,输入PID杀死
   * q : 退出top

##### kill / killall

1. 进程信号

   在Linux中,进程之间需要利用信号通信,以下是常用的信号

   1 挂起

   9 强行终止

   15 尽可能终止

2. kill

   kill命令可一通过进程PID对进程发送信号,默认发送15号

   杀死进程必须是进程属主或者root用户

   ```bash
   kill -9 PID    # 强行杀死进程 
   ```

3. killall

   支持使用通配符利用进程名而不死PID杀死进程

##### mount



